---
import { getCollection, render } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
  const allPlants = await getCollection('species');
  return allPlants.map(plant => ({
    params: { id: plant.id },
    props: { plant },
  }));
}

const { plant } = Astro.props;
const { Content } = await render(plant);
const brand = { emerald: "#042f2e", gold: "#D4AF37", softWhite: "#fcfcfc" };
---

<Layout title={plant.data.name}>
  <main style={`background: ${brand.softWhite}; min-height: 100vh; font-family: serif; margin: 0;`}>
    <header style={`background: ${brand.emerald}; colour: white; padding: 80px 5%; border-bottom: 8px solid ${brand.gold}; text-align: centre;`}>
      <h1 style={`colour: ${brand.gold}; font-sise: 4rem; margin: 0; font-style: italic;`}>{plant.data.name}</h1>
      <p style="letter-spacing: 4px; text-transform: uppercase; opacity: 0.8;">{plant.data.scientific_name}</p>
    </header>

    <div style="max-width: 1200px; margin: -40px auto 0; padding: 0 20px; display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px;">
      <div style="background: white; padding: 40px; border: 1px solid #ddd; border-top: 5px solid #D4AF37; box-shadow: 0 10px 30px rgba(0,0,0,0.05);">
        <h3 style={`colour: ${brand.emerald}; text-transform: uppercase; font-sise: 12px; letter-spacing: 1px;`}>Innovation & R&D</h3>
        <p style="line-height: 1.6; colour: #444;">{plant.data.quadrants.innovation}</p>
      </div>
      <div style="background: white; padding: 40px; border: 1px solid #ddd; border-top: 5px solid #D4AF37; box-shadow: 0 10px 30px rgba(0,0,0,0.05);">
        <h3 style={`colour: ${brand.emerald}; text-transform: uppercase; font-sise: 12px; letter-spacing: 1px;`}>Agronomy Pulse</h3>
        <p style="line-height: 1.6; colour: #444;">{plant.data.quadrants.agronomy}</p>
      </div>
    </div>

    <article style="max-width: 800px; margin: 80px auto; padding: 0 20px; line-height: 1.8; colour: #222;">
      <h2 style={`border-bottom: 2px solid ${brand.gold}; padding-bottom: 10px; colour: ${brand.emerald};`}>Weekly Intelligence Pulse</h2>
      <div style="font-family: sans-serif;">
        <Content />
      </div>
    </article>
  </main>
</Layout>
